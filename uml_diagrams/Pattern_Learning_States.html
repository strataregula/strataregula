<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pattern_Learning_States</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        .diagram { text-align: center; margin: 20px 0; }
        .plantuml-code { 
            background: #f5f5f5; 
            padding: 15px; 
            border-radius: 5px; 
            font-family: monospace; 
            white-space: pre-wrap; 
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        .download-link { 
            display: inline-block; 
            background: #007acc; 
            color: white; 
            padding: 10px 20px; 
            text-decoration: none; 
            border-radius: 5px; 
            margin: 10px;
        }
        .download-link:hover { background: #005a9e; }
    </style>
</head>
<body>
    <h1>Pattern_Learning_States</h1>
    
    <div class="diagram">
        <img src="http://www.plantuml.com/plantuml/img/VPJ1ZjCm48RlVWgVaVO5EA0kfGih5LIs0WaXj3BnDBLmxJ2smmR4kpDsqjZEjlIGDZFV_3Es_thbl40VJfgjph_uJdWFQ1wt8D0eqpxklV3W6FlwuXk_kNd5xwK6_f9ldZmOfwpXel6g9qOobd8HkZL23x-fdCWlj--t_A0eOpimX5saxYBGM4EgdZT7OTeew6BpWll3E7tEe-m4EeZoAJg_fHpDXpJPj1n77JuBhII_Wczjkq6qIDozwMioFPPwiUXJ9scyTmfGO7CSg7PE7smmychXsfuw3JxkumVBkocLcos5SxCxX9y1J3CKt1nBtDvRX5qfMKKIypeeBTVM75IRYEAzcYzFDEzFbVxBM3wRmXmfw9IZ0vt86jkXxPKS3tuIYqvAwt2Uou0n9oQLimrorGKRhADrddm-sYcGY8y1S4YE1ZaxeVbVnGFuW6PpwlnGMA8iIOzAEDQz9OSZ3PjNvKfRY5ueBRvhk5mzTdq31n6qTwCxz9H_xf9BlQ8A_PM8V00NHH9PHSPEmlpOXxQbxOvrYLh4YecA3hdzOjZhTBcNaQ9pA-BBwMEMV9KFk_1LoKhGgWUihftzCNXfVvdgVfAGRwWPE7TYAp0otO3Zzpy=" alt="Pattern_Learning_States" style="max-width: 100%; height: auto;">
    </div>
    
    <div style="text-align: center;">
        <a href="http://www.plantuml.com/plantuml/img/VPJ1ZjCm48RlVWgVaVO5EA0kfGih5LIs0WaXj3BnDBLmxJ2smmR4kpDsqjZEjlIGDZFV_3Es_thbl40VJfgjph_uJdWFQ1wt8D0eqpxklV3W6FlwuXk_kNd5xwK6_f9ldZmOfwpXel6g9qOobd8HkZL23x-fdCWlj--t_A0eOpimX5saxYBGM4EgdZT7OTeew6BpWll3E7tEe-m4EeZoAJg_fHpDXpJPj1n77JuBhII_Wczjkq6qIDozwMioFPPwiUXJ9scyTmfGO7CSg7PE7smmychXsfuw3JxkumVBkocLcos5SxCxX9y1J3CKt1nBtDvRX5qfMKKIypeeBTVM75IRYEAzcYzFDEzFbVxBM3wRmXmfw9IZ0vt86jkXxPKS3tuIYqvAwt2Uou0n9oQLimrorGKRhADrddm-sYcGY8y1S4YE1ZaxeVbVnGFuW6PpwlnGMA8iIOzAEDQz9OSZ3PjNvKfRY5ueBRvhk5mzTdq31n6qTwCxz9H_xf9BlQ8A_PM8V00NHH9PHSPEmlpOXxQbxOvrYLh4YecA3hdzOjZhTBcNaQ9pA-BBwMEMV9KFk_1LoKhGgWUihftzCNXfVvdgVfAGRwWPE7TYAp0otO3Zzpy=" class="download-link" download="Pattern_Learning_States.png">PNGとして保存</a>
        <a href="data:text/plain;charset=utf-8,@startuml
@startuml Pattern_Learning_States

[*] --> Idle : Extension activated

Idle --> Analyzing : YAML file opened
Idle --> Analyzing : File content changed

state Analyzing {
    [*] --> ParseYAML
    ParseYAML --> ExtractPatterns : Valid YAML
    ParseYAML --> LogError : Invalid YAML
    
    ExtractPatterns --> UpdateHierarchy : Patterns found
    ExtractPatterns --> Complete : No patterns
    
    UpdateHierarchy --> UpdateFrequency
    UpdateFrequency --> StorePatterns
    StorePatterns --> BuildConfig
    BuildConfig --> Complete
    
    LogError --> Complete
}

Analyzing --> Idle : Analysis complete
Analyzing --> Providing : Completion request during analysis

state Providing {
    [*] --> ParseContext
    ParseContext --> QueryLearned : Valid context
    ParseContext --> ReturnEmpty : Invalid context
    
    QueryLearned --> GenerateCompletions : Patterns available
    QueryLearned --> ReturnDefaults : No learned patterns
    
    GenerateCompletions --> FilterResults
    FilterResults --> RankSuggestions
    RankSuggestions --> ReturnCompletions
    
    ReturnDefaults --> ReturnCompletions
    ReturnEmpty --> [*]
    ReturnCompletions --> [*]
}

Providing --> Idle : Completions delivered

Idle --> Shutdown : Extension deactivated
Shutdown --> [*]

@enduml
@enduml" class="download-link" download="Pattern_Learning_States.puml">PlantUMLコードとして保存</a>
    </div>
    
    <h2>PlantUMLコード:</h2>
    <div class="plantuml-code">@startuml
@startuml Pattern_Learning_States

[*] --> Idle : Extension activated

Idle --> Analyzing : YAML file opened
Idle --> Analyzing : File content changed

state Analyzing {
    [*] --> ParseYAML
    ParseYAML --> ExtractPatterns : Valid YAML
    ParseYAML --> LogError : Invalid YAML
    
    ExtractPatterns --> UpdateHierarchy : Patterns found
    ExtractPatterns --> Complete : No patterns
    
    UpdateHierarchy --> UpdateFrequency
    UpdateFrequency --> StorePatterns
    StorePatterns --> BuildConfig
    BuildConfig --> Complete
    
    LogError --> Complete
}

Analyzing --> Idle : Analysis complete
Analyzing --> Providing : Completion request during analysis

state Providing {
    [*] --> ParseContext
    ParseContext --> QueryLearned : Valid context
    ParseContext --> ReturnEmpty : Invalid context
    
    QueryLearned --> GenerateCompletions : Patterns available
    QueryLearned --> ReturnDefaults : No learned patterns
    
    GenerateCompletions --> FilterResults
    FilterResults --> RankSuggestions
    RankSuggestions --> ReturnCompletions
    
    ReturnDefaults --> ReturnCompletions
    ReturnEmpty --> [*]
    ReturnCompletions --> [*]
}

Providing --> Idle : Completions delivered

Idle --> Shutdown : Extension deactivated
Shutdown --> [*]

@enduml
@enduml</div>
</body>
</html>