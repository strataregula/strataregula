<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Core_Data_Structures</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        .diagram { text-align: center; margin: 20px 0; }
        .plantuml-code { 
            background: #f5f5f5; 
            padding: 15px; 
            border-radius: 5px; 
            font-family: monospace; 
            white-space: pre-wrap; 
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
        }
        .download-link { 
            display: inline-block; 
            background: #007acc; 
            color: white; 
            padding: 10px 20px; 
            text-decoration: none; 
            border-radius: 5px; 
            margin: 10px;
        }
        .download-link:hover { background: #005a9e; }
    </style>
</head>
<body>
    <h1>Core_Data_Structures</h1>
    
    <div class="diagram">
        <img src="http://www.plantuml.com/plantuml/img/TLLDZvim4BtxL_WMqkvkxwZQHaeYjLAheisgbwfQEJ01Is1JssGJjVtl7M8RC7XpICZCi-VDcmyssZ1bkgOc6_z4jrB1ouuPzd8mgijDfq0JmeK1TM8vqA_0b80YOmOjWluX53_lM_itfTeeBafhF2dutO78hoaLNNC4PSsvnCik9iJMJ9i30Dw0iO7y8oH7awQxgs0DppzpK4pbrTK7177cIee6XD4fFO3vQ6zxj6uDwinpYBam_8cNpzSswdM9eEiRQvthRfQqXLeyAuhzI2L1MZwlTKhFaXS3x60f9OxQMx3jG2yn-1M5TMs18ZasoQ1zoDAV6AJ4Uc9Pdw3iQcQZU34hhsvA1w4jmalMj3KOBWNgPP0DohDTs5mX0nBwqvpMpryJzRZ-mMfU9CZrA2KU5TRUW2eXaQO2bKPuhsF6CT5P3l6MiR8wDfD-2Ur1imGkwpSIi-_fp_lKJu1iRkdZkSGfiyIkbx8FkInb7jDXnxg_Bb0EAPObgEzY9ytCfIlvwegGAJXpU9shpYw73a_hFfmEXjQNQs-3BWg6TtTryJm9FeKCsRZmMxi1V2PvfnGM9Olja09QKuNxevMQzmnJchadp-wBm7Rg81i0KuuML8AFa-72qptBiE88s7e-oep-mRk_j90RA6uZYkxLfAzMz2zTkLwwFO_zi-fLMD4dgDbDtegtcaH6yjtz_Q8Rte15HZ22b8WCHv2GnLQDWEPJzF3mkDp6ASKCpu1AKYC_zErEo0P4SNkdsD__" alt="Core_Data_Structures" style="max-width: 100%; height: auto;">
    </div>
    
    <div style="text-align: center;">
        <a href="http://www.plantuml.com/plantuml/img/TLLDZvim4BtxL_WMqkvkxwZQHaeYjLAheisgbwfQEJ01Is1JssGJjVtl7M8RC7XpICZCi-VDcmyssZ1bkgOc6_z4jrB1ouuPzd8mgijDfq0JmeK1TM8vqA_0b80YOmOjWluX53_lM_itfTeeBafhF2dutO78hoaLNNC4PSsvnCik9iJMJ9i30Dw0iO7y8oH7awQxgs0DppzpK4pbrTK7177cIee6XD4fFO3vQ6zxj6uDwinpYBam_8cNpzSswdM9eEiRQvthRfQqXLeyAuhzI2L1MZwlTKhFaXS3x60f9OxQMx3jG2yn-1M5TMs18ZasoQ1zoDAV6AJ4Uc9Pdw3iQcQZU34hhsvA1w4jmalMj3KOBWNgPP0DohDTs5mX0nBwqvpMpryJzRZ-mMfU9CZrA2KU5TRUW2eXaQO2bKPuhsF6CT5P3l6MiR8wDfD-2Ur1imGkwpSIi-_fp_lKJu1iRkdZkSGfiyIkbx8FkInb7jDXnxg_Bb0EAPObgEzY9ytCfIlvwegGAJXpU9shpYw73a_hFfmEXjQNQs-3BWg6TtTryJm9FeKCsRZmMxi1V2PvfnGM9Olja09QKuNxevMQzmnJchadp-wBm7Rg81i0KuuML8AFa-72qptBiE88s7e-oep-mRk_j90RA6uZYkxLfAzMz2zTkLwwFO_zi-fLMD4dgDbDtegtcaH6yjtz_Q8Rte15HZ22b8WCHv2GnLQDWEPJzF3mkDp6ASKCpu1AKYC_zErEo0P4SNkdsD__" class="download-link" download="Core_Data_Structures.png">PNGとして保存</a>
        <a href="data:text/plain;charset=utf-8,@startuml
@startuml Core_Data_Structures

interface LearnedPattern {
    +pattern: string
    +frequency: number
    +context: string
    +lastSeen: Date
}

class DynamicHierarchy {
    +environments: Set<string>
    +services: Set<string>
    +configTypes: Set<string>
    +patterns: Map<string, LearnedPattern>
    
    +addEnvironment(env: string): void
    +addService(service: string): void
    +addConfigType(type: string): void
    +updatePattern(pattern: LearnedPattern): void
}

class StrataRegulaConfig {
    +hierarchy: HierarchyConfig
    +completionSettings: CompletionSettings
    +learnedPatterns?: LearnedPattern[]
    
    +isValid(): boolean
    +merge(other: StrataRegulaConfig): StrataRegulaConfig
}

class HierarchyConfig {
    +environments: string[]
    +services: string[]
    +configTypes: string[]
    
    +toSet(): DynamicHierarchy
    +fromLearning(learned: DynamicHierarchy): HierarchyConfig
}

class CompletionSettings {
    +enabled: boolean
    +triggerOnDot: boolean
    +showPatternPreview: boolean
    +maxSuggestions: number
    
    +isEnabled(): boolean
    +shouldTriggerOnDot(): boolean
}

class PatternContext {
    +currentPattern: string
    +depth: number
    +position: Position
    +isInValuePosition: boolean
    
    +getPatternParts(): string[]
    +getCurrentPart(): string
    +getExpectedType(): 'environment' | 'service' | 'configType'
}

' Relationships
StrataRegulaConfig *-- HierarchyConfig
StrataRegulaConfig *-- CompletionSettings
StrataRegulaConfig o-- LearnedPattern

DynamicHierarchy o-- LearnedPattern
HierarchyConfig ..> DynamicHierarchy : converts to/from

@enduml
@enduml" class="download-link" download="Core_Data_Structures.puml">PlantUMLコードとして保存</a>
    </div>
    
    <h2>PlantUMLコード:</h2>
    <div class="plantuml-code">@startuml
@startuml Core_Data_Structures

interface LearnedPattern {
    +pattern: string
    +frequency: number
    +context: string
    +lastSeen: Date
}

class DynamicHierarchy {
    +environments: Set<string>
    +services: Set<string>
    +configTypes: Set<string>
    +patterns: Map<string, LearnedPattern>
    
    +addEnvironment(env: string): void
    +addService(service: string): void
    +addConfigType(type: string): void
    +updatePattern(pattern: LearnedPattern): void
}

class StrataRegulaConfig {
    +hierarchy: HierarchyConfig
    +completionSettings: CompletionSettings
    +learnedPatterns?: LearnedPattern[]
    
    +isValid(): boolean
    +merge(other: StrataRegulaConfig): StrataRegulaConfig
}

class HierarchyConfig {
    +environments: string[]
    +services: string[]
    +configTypes: string[]
    
    +toSet(): DynamicHierarchy
    +fromLearning(learned: DynamicHierarchy): HierarchyConfig
}

class CompletionSettings {
    +enabled: boolean
    +triggerOnDot: boolean
    +showPatternPreview: boolean
    +maxSuggestions: number
    
    +isEnabled(): boolean
    +shouldTriggerOnDot(): boolean
}

class PatternContext {
    +currentPattern: string
    +depth: number
    +position: Position
    +isInValuePosition: boolean
    
    +getPatternParts(): string[]
    +getCurrentPart(): string
    +getExpectedType(): 'environment' | 'service' | 'configType'
}

' Relationships
StrataRegulaConfig *-- HierarchyConfig
StrataRegulaConfig *-- CompletionSettings
StrataRegulaConfig o-- LearnedPattern

DynamicHierarchy o-- LearnedPattern
HierarchyConfig ..> DynamicHierarchy : converts to/from

@enduml
@enduml</div>
</body>
</html>